# Проект Photer

## Описание проекта

Photer - это полнофункциональная социальная сеть для обмена фотографиями, построенная с использованием современных веб-технологий. Проект включает фронтенд (Next.js) и бэкенд (NestJS с Prisma), позволяя пользователям создавать аккаунты, публиковать посты, взаимодействовать с контентом и управлять профилями.

## Цели проекта

- Создать удобную платформу для обмена фотографиями
- Обеспечить безопасность данных пользователей
- Реализовать масштабируемую архитектуру
- Поддерживать высокую производительность и пользовательский опыт

## Архитектура проекта

### Фронтенд (photer-app-dev)

- **Технологии**: Next.js 14, React, TypeScript, Tailwind CSS, Redux Toolkit Query
- **Структура**:
  - `src/app/` - App Router страницы
  - `src/features/` - Фичи (авторизация, посты, редактирование профиля)
  - `src/widgets/` - Виджеты (header, sidebar, модалы)
  - `src/shared/` - Общие компоненты и утилиты
  - `src/entities/` - Бизнес-сущности
- **Кэширование**: RTK Query с многоуровневой инвалидацией
- **Состояние**: Redux Toolkit с системой флагов для отслеживания операций

### Бэкенд (photer-api-dev)

- **Технологии**: NestJS, Prisma, PostgreSQL, JWT
- **Структура**:
  - `apps/gateway/` - Основное приложение
  - `src/auth/` - Модуль авторизации
  - `src/profile/` - Модуль профилей
  - `src/posts/` - Модуль постов

## Этапы разработки

1. **Инициализация проекта** - Настройка Next.js и NestJS
2. **Авторизация** - Регистрация, вход, JWT токены
3. **Профили пользователей** - Создание и редактирование профилей
4. **Публикация постов** - Загрузка фото, создание постов
5. **Взаимодействие** - Лайки, комментарии, подписки
6. **UI/UX улучшения** - Адаптивность, анимации

## Используемые технологии

- **Frontend**: Next.js, React, TypeScript, Tailwind CSS, Redux Toolkit
- **Backend**: NestJS, Prisma ORM, PostgreSQL
- **Аутентификация**: JWT, bcrypt
- **Файловое хранилище**: Локальное/облачное (S3-like)
- **Тестирование**: Jest, React Testing Library

## Стандарты и принципы

- **SOLID**: Принципы объектно-ориентированного дизайна
- **KISS**: Keep It Simple Stupid
- **DRY**: Don't Repeat Yourself
- **Безопасность**: Валидация данных, защита от XSS/CSRF
- **Приватность**: Профили пользователей отображаются с ограниченными деталями для не-владельцев
- **Производительность**: Оптимизация изображений, кеширование
- **Доступность**: WCAG 2.1 AA

## Текущий статус

Проект находится на этапе активной разработки. Основные фичи авторизации и публикации постов реализованы. Ведётся работа над взаимодействием пользователей и улучшением UI.

## Команда разработчиков

- **Архитектор**: Kilo Code
- **Разработчики**: [Указать при необходимости]

## Критические исправления

### Автоматическое отображение фотографий после создания поста (2025-09-18)

**Проблема:** Пользователи не видели загруженные фотографии сразу после создания поста - требовалась ручная перезагрузка страницы.

**Решено 8 критических проблем:**

1. Отсутствующий placeholder.svg
2. Неправильная раздача статических файлов в NestJS
3. Неправильный порядок установки флага postCreated в Redux
4. Неправильная логика приоритетов между кэшем и SSR данными
5. Несуществующий метод refetchTags в RTK Query
6. Недостаточная инвалидация кэша
7. Отсутствие принудительного обновления кэша
8. Неправильное получение profileId из Redux state

**Результат:** Фотографии теперь появляются автоматически сразу после создания поста без необходимости ручной перезагрузки страницы.

**Подробности:** См. `docs/photo-display-fix-technical.md`

## Контакты

Для вопросов по проекту обращайтесь к ответственному разработчику.
