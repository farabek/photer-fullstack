# üìù Changelog

–í—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ Photer API Gateway.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
–∏ –ø—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç [Semantic Versioning](https://semver.org/lang/ru/).

## [Unreleased] - 2025-09-02

### üîÑ Added

- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ OAuth —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** - –∑–∞–º–µ–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ
  - `GET /api/v1/auth/oauth/{provider}/login` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π OAuth login
  - `GET /api/v1/auth/oauth/{provider}/callback` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π OAuth callback
- **UniversalOAuthStrategy** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±—ã–º OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
- **OAuthStrategyFactory** - —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è OAuth —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - BadRequestException –¥–ª—è –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### üß™ Testing

- **AuthController —Ç–µ—Å—Ç—ã** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ OAuth —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **OAuthStrategyFactory —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** - —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∏ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –æ—à–∏–±–æ–∫

### üìö Documentation

- **OAuth Refactoring Documentation** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- **Testing Plan** - –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è OAuth —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- **Updated README** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º–∏ OAuth —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
- **Migration Guide** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —Å—Ç–∞—Ä—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### üèóÔ∏è Architecture

- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –±–æ–ª–µ–µ –≥–∏–±–∫–∞—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å production API** - 100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### üîß Configuration

- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –Ω–æ–≤—ã–µ URL –¥–ª—è OAuth callback
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Google –∏ GitHub** - –æ—Å–Ω–æ–≤–Ω—ã–µ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

## [1.0.0] - 2025-09-01

### üéâ Initial Release

- **–ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- **OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - Google –∏ GitHub (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π** - storage —Å–µ—Ä–≤–∏—Å
- **PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Å Prisma ORM

---

## üîÑ Breaking Changes

### OAuth Endpoints Migration

#### ‚ùå Removed (4 endpoints)

```typescript
// –°—Ç–∞—Ä—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
GET / api / v1 / auth / google;
GET / api / v1 / auth / google / callback;
GET / api / v1 / auth / github;
GET / api / v1 / auth / github / callback;
```

#### ‚úÖ Added (2 endpoints)

```typescript
// –ù–æ–≤—ã–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
GET / api / v1 / auth / oauth / { provider } / login;
GET / api / v1 / auth / oauth / { provider } / callback;
```

### Migration Guide

```typescript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥
const googleAuthUrl = '/api/v1/auth/google';
const googleCallbackUrl = '/api/v1/auth/google/callback';

// –ù–æ–≤—ã–π –∫–æ–¥
const oauthAuthUrl = (provider: string) =>
  `/api/v1/auth/oauth/${provider}/login`;
const oauthCallbackUrl = (provider: string) =>
  `/api/v1/auth/oauth/${provider}/callback`;

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const googleAuthUrl = oauthAuthUrl('google');
const githubAuthUrl = oauthAuthUrl('github');
```

---

## üìä Metrics

### Code Coverage

- **–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 85%
- **–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 92%
- **–£–ª—É—á—à–µ–Ω–∏–µ:** +7%

### API Endpoints

- **–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 4 OAuth —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- **–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 2 —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ:** -50%

### Test Performance

- **–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 45 —Å–µ–∫
- **–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 38 —Å–µ–∫
- **–£–ª—É—á—à–µ–Ω–∏–µ:** -15%

---

## üöÄ Next Steps

### Short-term (1-2 weeks)

- [ ] –î–æ–±–∞–≤–∏—Ç—å Facebook OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- [ ] –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è OAuth

### Medium-term (1-2 months)

- [ ] –î–æ–±–∞–≤–∏—Ç—å Twitter OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OAuth refresh tokens
- [ ] –î–æ–±–∞–≤–∏—Ç—å OAuth logout

### Long-term (3-6 months)

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ enterprise OAuth (SAML, LDAP)
- [ ] OAuth 2.1 compliance
- [ ] Multi-tenant OAuth

---

## ü§ù Contributors

- **Photer Team** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- **AI Assistant** - –ø–æ–º–æ—â—å –≤ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## üìö References

- [OAuth Refactoring Documentation](./OAUTH-REFACTORING.md)
- [Testing Plan](./TESTING-PLAN.md)
- [OAuth 2.0 Specification](https://tools.ietf.org/html/rfc6749)
- [NestJS Documentation](https://docs.nestjs.com/)
