#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
cd photer-app-dev

# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ unit —Ç–µ—Å—Ç—ã
echo "üß™ Running high-quality unit tests..."
npm test -- --testPathPatterns="Carousel\.test\.tsx|PostItem\.test\.tsx|LogIn\.test\.tsx|ConditionalSidebarWrapper\.test\.tsx" --watchAll=false --silent
if [ $? -ne 0 ]; then
  echo "‚ùå Carousel unit tests failed! Please fix before committing."
  exit 1
fi

echo "‚úÖ High-quality unit tests passed!"

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd ..

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º markdown —Ñ–∞–π–ª—ã
npm run lint:md:fix

# –î–æ–±–∞–≤–ª—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ–º–º–∏—Ç
git add *.md

echo "‚úÖ Pre-commit checks completed!"